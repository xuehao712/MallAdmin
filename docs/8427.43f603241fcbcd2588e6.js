(self.webpackChunkmall_admin=self.webpackChunkmall_admin||[]).push([[8427],{6594:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"}},77307:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"}},68229:function(e,t,r){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(a=r(7500))&&a.__esModule?a:{default:a};t.default=o,e.exports=o},67638:function(e,t,r){"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=(a=r(86994))&&a.__esModule?a:{default:a};t.default=o,e.exports=o},7500:function(e,t,r){"use strict";var a=r(95318),o=r(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(67294)),l=a(r(6594)),c=a(r(92074));(r=function(e,t){return n.createElement(c.default,Object.assign({},e,{ref:t,icon:l.default}))}).displayName="LeftOutlined",r=n.forwardRef(r),t.default=r},86994:function(e,t,r){"use strict";var a=r(95318),o=r(20862);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(r(67294)),l=a(r(77307)),c=a(r(92074));(r=function(e,t){return n.createElement(c.default,Object.assign({},e,{ref:t,icon:l.default}))}).displayName="RightOutlined",r=n.forwardRef(r),t.default=r},33603:function(e,t){"use strict";function r(){return{height:0,opacity:0}}function a(e){return{height:e.scrollHeight,opacity:1}}var o={motionName:"ant-motion-collapse",onAppearStart:r,onEnterStart:r,onAppearActive:a,onEnterActive:a,onLeaveStart:function(e){return{height:e.offsetHeight}},onLeaveActive:r,onAppearEnd:o=function(e,t){return"height"===t.propertyName},onEnterEnd:o,onLeaveEnd:o,motionDeadline:500};t.Z=o},71155:function(e,t,r){"use strict";var a=r(31780),o=r(41061),n=r(71577),l=r(74261),c=r(51908),u=r(67294);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],a=!0,o=!1,n=void 0;try{for(var l,c=e[Symbol.iterator]();!(a=(l=c.next()).done)&&(r.push(l.value),!t||r.length!==t);a=!0);}catch(e){o=!0,n=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw n}}return r}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function s(e){function t(e){s(e,d)}var r=e.value,d=e.name,s=e.onChange,m=(0,u.useMemo)((function(){return r}),[r]),f=(0,u.useMemo)((function(){return null!=r&&""!==r?r.substr(r.lastIndexOf("/")+1):null}),[r]),p=(0,u.useMemo)((function(){return[{uid:null,name:f,url:m}]}),[f,m]),v=(0,u.useMemo)((function(){return null!==r&&""!==r&&void 0!==r}),[r]),h=(L=i((0,u.useState)({policy:"",signature:"",key:"",ossaccessKeyId:"",dir:"",host:""}),2))[0],g=L[1],y=(P=i((0,u.useState)(!1),2))[0],b=P[1],A=(e=i((0,u.useState)(!0),2))[0],P=(e[1],L=i((0,u.useState)("http://macro-oss.oss-cn-shenzhen.aliyuncs.com"),2))[0],L=(L[1],e=i((0,u.useState)("http://localhost:8080/minio/upload"),2))[0];return e[1],u.createElement("div",null,u.createElement(o.Z,{action:A?P:L,data:A?h:null,listType:"picture",multiple:!1,showUploadList:v,fileList:p,beforeUpload:function(){var e=h;return!A||new Promise((function(t,r){a.x.policy().then((function(r){e.policy=r.data.policy,e.signature=r.data.signature,e.ossaccessKeyId=r.data.accessKeyId,e.key=r.data.dir+"/${filename}",e.dir=r.data.dir,e.host=r.data.host,g(e),t(!0)})).catch((function(e){console.log(e),r(!1)}))}))},onRemove:function(){t("")},onPreview:function(){b(!0)},onChange:function(e){return function(e,r){v=!0,p.pop();var a=h.host+"/"+h.dir+"/"+r.name;A||(a=null.data.url),p.push({uid:r.uid,name:r.name,url:a}),t(p[0].url)}(0,e.file)}},u.createElement(n.Z,{size:"small",type:"primary"},"Upload"),u.createElement("div",{className:""},"JPG/PNG file only, not exceed 10MB.")),u.createElement(l.Z,{visible:y},u.createElement(c.Z,{width:"100%",src:p[0].url,alt:""})))}e=r.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e})(s,"useMemo{imageUrl}\nuseMemo{imageName}\nuseMemo{fileList}\nuseMemo{showFileList}\nuseState{[dataObj, setDataObj]({\r\n        policy: '',\r\n        signature: '',\r\n        key: '',\r\n        ossaccessKeyId: '',\r\n        dir: '',\r\n        host: '',\r\n    })}\nuseState{[dialogVisible, setDialogVisible](false)}\nuseState{[useOss, setUseOss](true)}\nuseState{[ossUploadUrl, setossUploadUrl]('http://macro-oss.oss-cn-shenzhen.aliyuncs.com')}\nuseState{[minioUploadUrl, setMinioUploadUrl]('http://localhost:8080/minio/upload')}"),r=s,t.Z=r,(t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(t.register(s,"SingleUpload","c:\\Project\\mall-admin\\src\\components\\Upload\\singleUpload.js"),t.register(r,"default","c:\\Project\\mall-admin\\src\\components\\Upload\\singleUpload.js")),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&r(e)},31780:function(e,t,r){"use strict";r.d(t,{x:function(){return o}});var a=r(16911);e=r.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o={policy:n};function n(){return(0,a.Z)({url:"/aliyun/oss/policy",method:"get"})}(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(r.register(o,"ossServices","c:\\Project\\mall-admin\\src\\services\\oss.js"),r.register(n,"policy","c:\\Project\\mall-admin\\src\\services\\oss.js")),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&r(e)},14771:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var a=r(16911);e=r.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o={fetchList:n,deleteProductAttr:l,createProductAttr:c,updateProductAttr:u,getProductAttr:i,getProductAttrInfo:d};function n(e,t){return(0,a.Z)({url:"/productAttribute/list/"+e,method:"get",params:t})}function l(e){return(0,a.Z)({url:"/productAttribute/delete",method:"post",data:e})}function c(e){return(0,a.Z)({url:"/productAttribute/create",method:"post",data:e})}function u(e,t){return(0,a.Z)({url:"/productAttribute/update/"+e,method:"post",data:t})}function i(e){return(0,a.Z)({url:"/productAttribute/"+e,method:"get"})}function d(e){return(0,a.Z)({url:"/productAttribute/attrInfo/"+e,method:"get"})}(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(r.register(o,"productAttrServices","c:\\Project\\mall-admin\\src\\services\\productAttr.js"),r.register(n,"fetchList","c:\\Project\\mall-admin\\src\\services\\productAttr.js"),r.register(l,"deleteProductAttr","c:\\Project\\mall-admin\\src\\services\\productAttr.js"),r.register(c,"createProductAttr","c:\\Project\\mall-admin\\src\\services\\productAttr.js"),r.register(u,"updateProductAttr","c:\\Project\\mall-admin\\src\\services\\productAttr.js"),r.register(i,"getProductAttr","c:\\Project\\mall-admin\\src\\services\\productAttr.js"),r.register(d,"getProductAttrInfo","c:\\Project\\mall-admin\\src\\services\\productAttr.js")),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&r(e)},50916:function(e,t,r){"use strict";r.d(t,{B:function(){return o}});var a=r(16911);e=r.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o={fetchList:n,createProductAttrCate:l,deleteProductAttrCate:c,updateProductAttrCate:u,fetchListWithAttr:i};function n(e){return(0,a.Z)({url:"/productAttribute/category/list",method:"get",params:e})}function l(e){return(0,a.Z)({url:"/productAttribute/category/create",method:"post",data:e})}function c(e){return(0,a.Z)({url:"/productAttribute/category/delete/"+e,method:"get"})}function u(e,t){return(0,a.Z)({url:"/productAttribute/category/update/"+e,method:"post",data:t})}function i(){return(0,a.Z)({url:"/productAttribute/category/list/withAttr",method:"get"})}(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(r.register(o,"productAttrCateServices","c:\\Project\\mall-admin\\src\\services\\productAttrCate.js"),r.register(n,"fetchList","c:\\Project\\mall-admin\\src\\services\\productAttrCate.js"),r.register(l,"createProductAttrCate","c:\\Project\\mall-admin\\src\\services\\productAttrCate.js"),r.register(c,"deleteProductAttrCate","c:\\Project\\mall-admin\\src\\services\\productAttrCate.js"),r.register(u,"updateProductAttrCate","c:\\Project\\mall-admin\\src\\services\\productAttrCate.js"),r.register(i,"fetchListWithAttr","c:\\Project\\mall-admin\\src\\services\\productAttrCate.js")),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&r(e)},27291:function(e,t,r){"use strict";r.d(t,{n:function(){return o}});var a=r(16911);e=r.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),"undefined"!=typeof reactHotLoaderGlobal&&reactHotLoaderGlobal.default.signature;var o={fetchList:n,deleteProductCate:l,createProductCate:c,updateProductCate:u,getProductCate:i,updateShowStatus:d,updateNavStatus:s,fetchListWithChildren:m};function n(e,t){return(0,a.Z)({url:"/productCategory/list/"+e,method:"get",params:t})}function l(e){return(0,a.Z)({url:"/productCategory/delete/"+e,method:"post"})}function c(e){return(0,a.Z)({url:"/productCategory/create",method:"post",data:e})}function u(e,t){return(0,a.Z)({url:"/productCategory/update/"+e,method:"post",data:t})}function i(e){return(0,a.Z)({url:"/productCategory/"+e,method:"get"})}function d(e){return(0,a.Z)({url:"/productCategory/update/showStatus",method:"post",data:e})}function s(e){return(0,a.Z)({url:"/productCategory/update/navStatus",method:"post",data:e})}function m(){return(0,a.Z)({url:"/productCategory/list/withChildren",method:"get"})}(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(r.register(o,"productCateServices","c:\\Project\\mall-admin\\src\\services\\productCate.js"),r.register(n,"fetchList","c:\\Project\\mall-admin\\src\\services\\productCate.js"),r.register(l,"deleteProductCate","c:\\Project\\mall-admin\\src\\services\\productCate.js"),r.register(c,"createProductCate","c:\\Project\\mall-admin\\src\\services\\productCate.js"),r.register(u,"updateProductCate","c:\\Project\\mall-admin\\src\\services\\productCate.js"),r.register(i,"getProductCate","c:\\Project\\mall-admin\\src\\services\\productCate.js"),r.register(d,"updateShowStatus","c:\\Project\\mall-admin\\src\\services\\productCate.js"),r.register(s,"updateNavStatus","c:\\Project\\mall-admin\\src\\services\\productCate.js"),r.register(m,"fetchListWithChildren","c:\\Project\\mall-admin\\src\\services\\productCate.js")),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&r(e)},90476:function(e,t,r){"use strict";var a=r(8834),o=r(14617),n=r(35845),l=r(48086),c=r(39144),u=r(47933),i=r(34366),d=r(71577),s=r(19650),m=r(67294),f=r(27291),p=r(50916),v=r(14771),h=r(71155),g=r(29041),y=r(16550),b=r(28368);function A(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||L(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],a=!0,o=!1,n=void 0;try{for(var l,c=e[Symbol.iterator]();!(a=(l=c.next()).done)&&(r.push(l.value),!t||r.length!==t);a=!0);}catch(e){o=!0,n=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw n}}return r}}(e,t)||L(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){if(e){if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}e=r.hmd(e),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e),r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e};var C=a.Z.Option,Z=o.Z.TextArea;function E(e){var t,r=(0,y.TH)(),L=e.isEdit,j=P(n.Z.useForm(),1)[0],E={description:"",icon:"",keywords:"",name:"",navStatus:0,parentId:0,productUnit:"",showStatus:0,sort:0,productAttributeIdList:[]},S=(e=(t=P((0,m.useState)([]),2))[0],t[1]),H=(t=P((0,m.useState)([]),2))[0],G=t[1],w=(t=P((0,m.useState)([{value:[]}]),2))[0],I=t[1];(0,m.useEffect)((function(){L?(f.n.getProductCate(r.state.id).then((function(e){j.setFieldsValue(e.data)})),v.C.getProductAttrInfo(r.state.id).then((function(e){if(null!=e.data&&0<e.data.length){for(var t=[],r=0;r<e.data.length;r++)t.push({key:Date.now()+r,value:[e.data[r].attributeCategoryId,e.data[r].attributeId]});I(t)}}))):j.setFieldsValue(E),M(),O()}),[]);var M=function(){f.n.fetchList(0,{pageSize:100,pageNum:1}).then((function(e){(e=e.data.list).unshift({id:0,name:"No Parent"}),S(e)}))},O=function(){p.B.fetchListWithAttr().then((function(e){for(var t=e.data,r=H,a=0;a<t.length;a++){var o=t[a],n=[];if(null!=o.productAttributeList&&0<o.productAttributeList.length)for(var l=0;l<o.productAttributeList.length;l++)n.push({label:o.productAttributeList[l].name,value:o.productAttributeList[l].id});r.push({label:o.name,value:o.id,children:n})}G(r)}))},U=function(){j.setFieldsValue(E),M(),I([{value:[]}])};return m.createElement("div",{className:"productCateDetail_form-wrapper"},m.createElement(c.Z,{className:"form-container"},m.createElement(n.Z,{labelCol:{span:5},form:j,onFinish:function(){(0,b.default)({title:"Are you sure to submit this data?",okText:"OK",okType:"primary",onOk:function(){j.setFieldsValue({productAttributeIdList:function(){for(var e=[],t=0;t<w.length;t++){var r=w[t];null!==r.value&&2===r.value.length&&e.push(r.value[1])}return e}()}),console.log(j.getFieldsValue()),L?f.n.updateProductCate(r.state.id,j.getFieldsValue()).then((function(e){l.ZP.success("Modify Success",5),g.history.goBack()})):f.n.createProductCate(j.getFieldsValue()).then((function(e){U(),l.ZP.success("Submit Success",5)}))},onCancel:function(){}})},onFinishFailed:function(){return l.ZP.error("Validation Fail",5),!1}},m.createElement(n.Z.Item,{label:"Name: ",name:"name",rules:[{required:!0,message:"Please enter brand name"},{min:2,max:140,message:"Length must between 2 and 140"}]},m.createElement(o.Z,null)),m.createElement(n.Z.Item,{label:"Parent: ",name:"parentId"},m.createElement(a.Z,{placeholder:"Please select"},e.map((function(e){return m.createElement(C,{key:e.id,value:e.id},e.name)})))),m.createElement(n.Z.Item,{label:"Unit: ",name:"productUnit"},m.createElement(o.Z,null)),m.createElement(n.Z.Item,{label:"Sort: ",name:"sort"},m.createElement(o.Z,null)),m.createElement(n.Z.Item,{label:"Display: ",name:"showStatus"},m.createElement(u.ZP.Group,null,m.createElement(u.ZP,{value:1},"Yes"),m.createElement(u.ZP,{value:0},"No"))),m.createElement(n.Z.Item,{label:"Nav: ",name:"navStatus"},m.createElement(u.ZP.Group,null,m.createElement(u.ZP,{value:1},"Yes"),m.createElement(u.ZP,{value:0},"No"))),m.createElement(n.Z.Item,{label:"Icon: ",name:"icon"},m.createElement(h.Z,null)),w.map((function(e,t){return m.createElement(n.Z.Item,{colon:0===t,label:0===t?"FilterAttr: ":" ",key:t},m.createElement(i.Z,{allowClear:!0,key:t,value:e.value,onChange:function(e){return r=e,(e=w)[t].value=r,void I(A(e));var r},options:H,name:"value"}),m.createElement(d.Z,{danger:!0,style:{marginTop:"10px"},onClick:function(){return t=e,void(1!==w.length?-1!==(r=w.indexOf(t))&&((t=A(w)).splice(r,1),I(t)):l.ZP.warning("At least one",5));var t,r}},"Delete"))})),m.createElement(n.Z.Item,{style:{textAlign:"center"}},m.createElement(d.Z,{size:"small",type:"primary",onClick:function(){var e;3!==w.length?(e={value:null,key:Date.now()},I([].concat(A(w),[e]))):l.ZP.warning("Most three items",5)}},"Add")),m.createElement(n.Z.Item,{label:"Keyword: ",name:"keywords"},m.createElement(o.Z,null)),m.createElement(n.Z.Item,{label:"Description: ",name:"description"},m.createElement(Z,{autoSize:"true"})),m.createElement(n.Z.Item,null,m.createElement(s.Z,null,m.createElement(d.Z,{type:"primary",htmlType:"submit"},"Submit"),!L&&m.createElement(d.Z,{onClick:U},"Reset"))),m.createElement(n.Z.Item,{name:"productAttributeIdList",noStyle:!0},m.createElement(o.Z,{hidden:!0})))))}r(E,"useLocation{route}\nuseForm{[productCateForm]}\nuseState{[selectProductCateList, setSelectProductCateList]([])}\nuseState{[filterAttrs, setFilterAttrs]([])}\nuseState{[filterProductAttrList, setFilterProductAttrList]([{value:[]}])}\nuseEffect{}",(function(){return[y.TH]})),r=E,t.Z=r,(t="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(t.register(C,"Option","c:\\Project\\mall-admin\\src\\views\\pms\\productCate\\components\\productCateDetail.js"),t.register(Z,"TextArea","c:\\Project\\mall-admin\\src\\views\\pms\\productCate\\components\\productCateDetail.js"),t.register(E,"ProductCateDetail","c:\\Project\\mall-admin\\src\\views\\pms\\productCate\\components\\productCateDetail.js"),t.register(r,"default","c:\\Project\\mall-admin\\src\\views\\pms\\productCate\\components\\productCateDetail.js")),(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&r(e)},27678:function(e,t,r){"use strict";function a(){return{width:document.documentElement.clientWidth,height:window.innerHeight||document.documentElement.clientHeight}}function o(e){var t=e.getBoundingClientRect();return e=document.documentElement,{left:t.left+(window.pageXOffset||e.scrollLeft)-(e.clientLeft||document.body.clientLeft||0),top:t.top+(window.pageYOffset||e.scrollTop)-(e.clientTop||document.body.clientTop||0)}}r.d(t,{g1:function(){return a},os:function(){return o}})}}]);